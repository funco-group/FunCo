# 가상스레드 virtual thread
- Spring boot 3.2 부터 적용
- 자바 기존 스레드는 Platform thread 라고 칭하게 되었다.

기존의 플랫폼 스레드는 운영체제의 스레드에 종속적이다. ⇒ 성능을 뽑아내기 위해 컴퓨팅 비용이 듦

코틀린의 코루틴은 자바보다 성능이 월등히 좋았음

기존 플랫폼 스레드는

운영체제가 자바에 빌려준 스레드는 점유되고 운영체제가 회수할 수 없게되어있다.

이걸 해결하려면 비동기로 돌려야하는데 그럼 데이터의 정합성이 깨짐

### 가상스레드

가상스레드는 jvm 스레드와 1:N으로 매칭된다.

성능을 8~10배 끌어올림

- 기존의 자바와 문법을 동일하게 사용할 수 있어서 java21버전만 올려주면 사용할 수 있는 셈.
- 자바에서만 가상 존재하는 스레드이기 떄문에 운영체제에 종속되지 않는다.
- vt에서 I/O작업을 호출하면 java runtime에서 non-blocking os  호출을 수행하고 vt를 자동으로 일시 중단한다.
- 생성 비용이 저렴하고 무한대로 풍부한 스레드로, 수명이 짧고 호출 스택이 얇으며, 단일 http 호출 또는 단일 jdbc 쿼리 정도만 수행하는 것으로 인식될 정도로 변화에 비해 느껴지는 영향은 적다.
- 이를통해 하드웨어 활용도가 최적에 가까워져 높은 수준의 동시성을 구현해서 높은 처리량을 제공한다.

<aside>
🌐 기업 입장에선 적은 비용 투자로 대폭 성능향상을 기대할 수 있다. → version 만 올리면 적용이 되므로

</aside>

> IO작업이 많은 서버의 경우 유리함. 멀티 서버의 경우 각각 자바 버전을 다르게 하여 적용할 수 있음
> 

- CPU bound 작업엔 비효율
    - 앞선 테스트에서 봤듯이 IO 작업 없이 **CPU 작업만 수행하는것은, 플랫폼 스레드만 사용하는것보다 성능이 떨어집니다**. 컨텍스트 스위칭이 빈번하지 않은 환경이라면, 기존 스레드모델을 사용하시는것이 이득.


### 우리 프로젝트에 가상 스레드를 적용할 수 있을지? 어떤 이점이 있을지? 생각해보기


